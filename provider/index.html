<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css"
    rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  </head>
  <title>Farerun</title>
</head>

<body>
  <header class="main-header" style="background: url(img/banner.jpg) no-repeat center/cover">
    <div class="container">
      <div class="row">
        <div class="col-md-12 d-flex align-items-center justify-content-between py-5">
          <div class="logo-main">
            <!-- <img src="img/logo.png" class="img-fluid" alt=""> -->
          </div>
          <div class="login-btn">
            <a href="#" class="login-now text-capitalize text-white">login</a>
          </div>
        </div>
      </div>
    </div>
    <div class="driver-from">
      <div class="container">
        <div class="row">
          <div class="col-sm-10 col-md-6 col-lg-6 offset-lg-1 p-b-md">
            <div class="banner-content">
              <h1 class="banner-title">Drive with Farerun</h1>
              <div class="banner-des">
                Earn good money with your vehicle.
              </div>
            </div>
          </div>
          <div class="col-sm-10 col-md-6 col-lg-4 mt-5 mt-md-0">
            <!-- step 1 -->
            <div class="login-from step-1 d-none">
              <div id="success" class="alert alert-success text-center d-none"></div>
              <div class="form-title mb-3">
                Set Up Your Business Profile.
              </div>
              <div class="alert alert-danger text-center serverEr d-none"></div>
              <div class="form-term mb-2">
                How Whould you like customer to contact you?
              </div>
              <form action="" method="post" id="signupProvider">
              <div class="form-group">
                <label for="email">Email</label>
                <input type="text" class="form-control" id="email" name="email" placeholder="john.doe@gmail.com" required />
                <span id="emailErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>
              <div class="form-group">
                <label for="code">Phone</label>
                <div class="d-flex phone-input">
                  <select id="code" class="js-example-basic-single form-control" name="code" required>
                    <option value="+1">+1</option>
                    <option value="+92">+92</option>
                  </select>
                  <input type="text" name="phone" class="form-control" placeholder="51112345" required />
                </div>
                <span id="phoneErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>
              <label class="custom-check">Enable text messages
                <input type="checkbox" checked="checked" />
                <span class="checkmark"></span>
              </label>
              <div class="form-term mb-2">
                Lorem ipsum dolor sit amet consectetur
                adipisicing elit. Rem facere suscipit earum
                voluptatibus doloremque quia?
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" name="password" placeholder="password" required/>
                <span id="passwordErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>
              <!-- <div class="form-group d-none">
                                    <label class="mb-0">Citis</label>
                                    <select class="js-example-basic-single form-control" name="state">
                                        <option value="AL">City </option>
                                        <option value="WY">Warri</option>
                                        <option value="WY">Benin</option>
                                    </select>
                               </div> -->
              <div class="form-term my-2">
                By tapping continue with Facebook or
                Continue with Google. you adree to the
                <br />
                <a href="#">Terms of Service</a> and
                <a href="#">Privacy Policy</a>.
              </div>

              <button type="submit" class="btn btn-primary w-100 mt-3" id="step-1" type="button">
                Next
              </button>
              </form>
            </div>
            <!-- step 2 -->
            <div class="login-from step-2 d-none">
              <div id="resendSuccess" class="alert alert-success text-center d-none"></div>
              <div class="form-title mb-3">
                Please enter OTP Code.
              </div>
              <!-- <div class="form-term mb-2">How Whould you like customer to contact you?</div> -->
              <div id="otpPhone" class="form-term my-2">
              </div>
              <div class="form-group">
                <label for="otp">Code.</label>
                <input type="text" class="form-control" id="otp" name="otp" placeholder="0 0 0 0" />
                <span id="otpErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>
              <div class="form-term my-2">
                Didn't you receive any code? <br />
                <a id="resend" href="javascript:void(0)">Resend New Code</a>
              </div>
              <div class="d-flex justify-content-between">
                <button class="btn btn-primary w-100 mt-3" id="step-2-back" type="button">
                  Back
                </button>
                <div class="px-3"></div>
                <button class="btn btn-primary w-100 mt-3" id="step-2" type="button" disabled>
                  Next
                </button>
              </div>
            </div>
            <!-- step 3 -->
            <div class="login-from step-3 d-none">
              <div class="form-title mb-3">
                To start , help us get to know you and your
                business
              </div>
              <div class="alert alert-danger text-center serverEr3 d-none"></div>
              <div class="form-term mb-2">
                This info helps our team provide customized
                support -- it won't be public.
              </div>

              <div class="form-group">
                <div class="form-title mb-3">
                  What is your name?
                </div>
                <label for="provider_first_name">First Name</label>
                <input type="text" class="form-control" id="provider_first_name" name="provider_first_name" placeholder="First Name" />
                <span id="provider_first_nameErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>

              <div class="form-group">
                <label for="provider_last_name">Last Name</label>
                <input type="text" class="form-control" id="provider_last_name" name="provider_last_name" placeholder="Last Name" />
                <span id="provider_last_nameErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>

              <div class="form-title mb-3">
                How much do you spend each month on online
                marketing
              </div>

              <label class="custom-radio">$1-$100
                <input type="radio" class="online-marketing" checked="checked" name="online-marketing" value="$1-$100" />
                <span class="checkmark"></span>
              </label>

              <label class="custom-radio">$100-$400
                <input type="radio" class="online-marketing" name="online-marketing" value="$100-$400"/>
                <span class="checkmark"></span>
              </label>

              <label class="custom-radio">$400-$600
                <input type="radio" class="online-marketing" name="online-marketing" value="$400-$600"/>
                <span class="checkmark"></span>
              </label>

              <div class="d-flex justify-content-between">
                <button class="btn btn-primary w-100 mt-3" id="step-3-back" type="button">
                  Back
                </button>
                <div class="px-3"></div>
                <button class="btn btn-primary w-100 mt-3" id="step-3" type="button">
                  Next
                </button>
              </div>
            </div>
            <!-- step 4 -->
            <div class="login-from step-4 d-none">
            <div class="alert alert-danger text-center serverEr4 d-none"></div>
            <div class="form-group">
              <label for="service_id">Services</label>
              <div class="form-title mb-3">
                <select id="service_id" class="js-example-basic-single form-control" style="width: 100%;" name="service_id" required>
                </select>
                <span id="serviceErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>
            </div>
            <div class="d-flex flex-wrap" id="subService">
            </div>
            <span id="subServiceErr" class="text-danger" style="font-size: .8rem;"></span>
              <div class="form-group">
                <div class="form-title mb-3">
                  Where do you work?
                </div>
                <label for="zipCode">Enter location</label>
                <input type="text" class="form-control" id="zipCode" name="zipCode" placeholder="Enter location" />
                <span id="zipCodeErr" class="text-danger" style="font-size: .8rem;"></span>
              </div>

              <div class="zip-code d-flex flex-wrap">
              </div>
              <div class="d-flex justify-content-between">
                <button class="btn btn-primary w-100 mt-3" id="step-4-back" type="button">
                  Back
                </button>
                <div class="px-3"></div>
                <button class="btn btn-primary w-100 mt-3" id="step-4" type="button">
                  Next
                </button>
              </div>
            </div>

            <!-- step 5 -->
            <div class="login-from step-5 d-none">
              <div class="form-group">
                <div class="form-title mb-3">
                  Choose your role?
                </div>
              </div>

              <label class="custom-radio">I am a individual
                <input type="radio" id="individual" name="role" />
                <span class="checkmark"></span>
              </label>
              <label class="custom-radio">We are a company
                <input type="radio" id="company" name="role" />
                <span class="checkmark"></span>
              </label>

              <!--  -->

              <div class="d-flex justify-content-between">
                <button class="btn btn-primary w-100 mt-3" id="step-5-back" type="button">
                  Back
                </button>
                <div id="space" class="px-3 d-none"></div>
                <button class="btn btn-primary w-100 mt-3" id="step-individual" type="button">
                  Next
                </button>
                <button class="btn btn-primary w-100 mt-3" id="step-compnay" type="button">
                  Next
                </button>
              </div>
            </div>

            <!-- step 6 user -->
            <div class="login-from step-6-user d-none">
              <div class="alert alert-danger text-center serverEr6 d-none"></div>
              <form action="" id="profile">
                <div class="form-group">
                  <div class="form-title mb-3">
                    Profile Setting
                  </div>

                  <div class="user-profile">
                    <div class="user-image d-flex align-items-center justify-content-center">
                      <img src="img/images.png" class="img-fluid" alt="" />
                    </div>
                    <label for="file-upload1" class="upload-image">
                      <i class="fas fa-pencil-alt"></i>
                      <input type="file" class="d-none" id="file-upload1" name="image" />
                    </label>
                  </div>
                </div>
                <input type="hidden" name="type" value="individual">
                <div class="form-group">
                  <label for="first_name">First Name</label>
                  <input type="text" class="form-control" id="first_name" placeholder="First name" name="first_name" required/>
                  <span id="first_nameErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="last_name">Last Name</label>
                  <input type="text" class="form-control" id="last_name" placeholder="last name" name="last_name" required/>
                  <span id="last_nameErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="datepicker">Date of birth</label>
                  <input data-date-format="dd/mm/yyyy" name="dob" id="datepicker" class="form-control"/>
                  <span id="dobErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="hourly_rate">Hourly rate</label>
                  <input type="text" class="form-control" id="hourly_rate" name="hourly_rate"
                    placeholder="$10 per hour" required/>
                  <span id="hourly_rateErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="street_address">Address</label>
                  <input type="text" class="form-control" id="street_address" placeholder="street address"
                    name="street_address" required/>
                  <span id="street_addressErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="suite_number" name="suite_number" placeholder="suit or #" required/>
                  <span id="suite_numberErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="zip_code" name="zip_code" placeholder="zip code" required/>
                  <span id="zip_codeErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="city" name="city" placeholder="City" required/>
                  <span id="cityErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="state" name="state" placeholder="State" required/>
                  <span id="stateErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="name">Bio</label>
                  <textarea type="text" class="form-control" id="bio" name="bio" placeholder="Enter you bio"></textarea>
                  <span id="bioErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-term mb-2">
                  Please make sure all information you submit
                  is accurate before submit.
                </div>
                <div class="d-flex justify-content-between">
                  <button class="btn btn-primary w-100 mt-3" id="step-6-back" type="button">
                    Back
                  </button>
                  <div class="px-3"></div>
                  <button type="submit" class="btn btn-primary w-100 mt-3" id="submit" type="button">
                    submit
                  </button>
                </div>
              </form>
            </div>
            <!-- step 6 company-->
            <div class="login-from step-6-company d-none">
              <div class="alert alert-danger text-center serverEr6 d-none"></div>
              <form action="" id="companyProfile">
                <div class="form-group">
                  <div class="form-title mb-3">
                    Company Profile Setting
                  </div>
    
                  <div class="user-profile">
                    <div class="user-image d-flex align-items-center justify-content-center">
                      <img src="img/images.png" class="img-fluid" alt="" />
                    </div>
                    <label for="file-upload" class="upload-image">
                      <i class="fas fa-pencil-alt"></i>
                      <input type="file" name="image" id="file-upload" class="d-none" />
                    </label>
                  </div>
                </div>
                <input type="file" name="type" hidden value="Company"/>
                <div class="form-group">
                  <label for="business_name">Business Name</label>
                  <input type="text" class="form-control" id="business_name" placeholder="First name" name="business_name" required />
                  <span id="business_nameErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="founded">Founded</label>
                  <input data-date-format="dd/mm/yyyy" name="founded" id="founded" class="form-control" required/>
                  <span id="foundedErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="number_of_employees">Number of Employees</label>
                  <input type="text" class="form-control" id="number_of_employees" name="number_of_employees" placeholder="Number of Employees" required/>
                  <span id="number_of_employeesErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="hourly_rate">Hourly rate</label>
                  <input type="text" class="form-control" id="hourly_rate" name="hourly_rate" placeholder="$10 per hour" required/>
                  <span id="hourly_rateErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <label for="street_address">Home Address</label>
                  <input type="text" class="form-control" id="street_address" name="street_address" placeholder="street address" required/>
                  <span id="street_addressErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="suite_number" name="suite_number" placeholder="suit or #" required/>
                  <span id="suite_numberErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="zip_code" name="zip_code" placeholder="Zip Code" required/>
                  <span id="zip_codeErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="city" name="city" placeholder="city" required/>
                  <span id="cityErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" id="state" name="state" placeholder="state" required/>
                  <span id="stateErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
    
                <div class="form-group">
                  <label for="bio">Bio</label>
                  <textarea type="text" class="form-control" id="bio" name="bio" placeholder="Enter you bio"></textarea>
                  <span id="bioErr" class="text-danger" style="font-size: .8rem;"></span>
                </div>
                <div class="form-term mb-2">
                  Please make sure all information you submit
                  is accurate before submit.
                </div>
    
                <div class="d-flex justify-content-between">
                  <button class="btn btn-primary w-100 mt-3" id="step-6-back-c" type="button">
                    Back
                  </button>
                  <div class="px-3"></div>
                  <button type="submit" class="btn btn-primary w-100 mt-3" id="submit-company" type="button">
                    submit
                  </button>
                </div>
              </form>
            </div>
          </div>

          </div>
        </div>
      </div>
    </div>

    <div class="arrow-down-banner text-center">
      <i class="fas fa-angle-down"></i>
    </div>
  </header>

  <section class="why-farerun">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="why-title">Why Farerun?</h2>
        </div>
        <div class="col-sm-4 text-center">
          <div class="box-why">
            <div class="text-center">
              <i class="fas fa-hand-holding-usd"></i>
            </div>
            <h3>Earn money</h3>
            <p>Drive with Bolt and earn extra income.</p>
          </div>
        </div>
        <div class="col-sm-4 text-center">
          <div class="box-why">
            <div class="text-center">
              <i class="far fa-clock"></i>
            </div>
            <h3>Drive anytime</h3>
            <p>
              Work with your own schedule. No minimum hours
              and no boss.
            </p>
          </div>
        </div>
        <div class="col-sm-4 text-center">
          <div class="box-why">
            <div class="text-center">
              <img src="img/credit-card.svg" class="img-fluid" alt="" />
            </div>
            <h3>No monthly fees</h3>
            <p>No risk, you only pay when you earn.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="why-farerun">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="why-title">How Farerun works?</h2>
        </div>
        <div class="col-sm-4 text-center mb-4 mt-md-0">
          <div class="box-why">
            <h3 class="mb-2">1. Accept the request</h3>
            <img src="img/step1.jpg" class="img-thumbnail" alt="" />
          </div>
        </div>
        <div class="col-sm-4 text-center mb-4 mt-md-0">
          <div class="box-why">
            <h3 class="mb-2">2. Pickup the client</h3>
            <img src="img/step2.jpg" class="img-thumbnail" alt="" />
          </div>
        </div>
        <div class="col-sm-4 text-center mb-4 mt-md-0">
          <div class="box-why">
            <h3 class="mb-2">3. Drive to destination</h3>
            <img src="img/step3.jpg" class="img-thumbnail" alt="" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer-sec py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center">
          <button class="sign-up-btn btn btn-lg btn-primary">
            Sign up to drive with Bolt
          </button>
          <div class="copy-right">
            <p class="pt-4 mb-0">
              Got questions or concerns? Contact us.
            </p>
            <p>
              Taxify OÜ. Vana-Lõuna tn 39/1, Tallinn, 10134,
              Estonia
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDM06VJYrW1xHW4F4zvL1Bt4lgcF7YgZ7U&libraries=places"></script>
  <script src="./js/autoComplete.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
    integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript">
      $('#datepicker').datepicker({
          weekStart: 1,
          endDate: '+1d',
          autoclose: true,
          todayHighlight: true,
        });
      $('#datepicker').datepicker("setDate", new Date());
      $('#founded').datepicker({
          weekStart: 1,
          endDate: '+1d',
          autoclose: true,
          todayHighlight: true,
        });
      $('#founded').datepicker("setDate", new Date());
    </script>
  <script>

    // In your Javascript (external .js resource or <script> tag)
    $(document).ready(function () {
        $(".js-example-basic-single").select2();
      if(localStorage.getItem('provider_token')){
        $('.step-1').addClass('d-none');
        $(`.step-${localStorage.getItem('step') == 6 ? 5 : localStorage.getItem('step') }`).removeClass('d-none');
        $('#step-3-back').prop("disabled", true);
      } else {
        $('.step-1').removeClass('d-none');
      }
    });
    
    // add  class
    $(document).ready(function () {
      const API = 'http://127.0.0.1:8000/api/';
      let phone = '';

      const getServices = () => {
        $.ajax({
          url: `${API}user/get-menu`,
          type: 'GET',
          success: (response) => {
            localStorage.setItem('services', JSON.stringify(response.data));
              let services = response.data;
              let html = '<option selected value="" disabled>Select Service</option>';
              services.forEach(service => {
                html += `<option value=${service.id}>${service.name}</option>`
              });
              $('#service_id').html(html);
          }
        });
      }
      if (localStorage.getItem('step') == 4) {
        getServices();
      }

      const handleEmailChange = (email) => {
        let regex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
        let result = regex.test(email);
        if (result) {
          $('#emailErr').text('');
          return true
        } else {
          $('#emailErr').text('please enter vaild email');
          return false
        }
      };

      const handlePhoneChange = (phone) => {
        let regex = /^[0-9]{10,11}$/
        let result = regex.test(phone);
        if ((result && ($(this).find('#code').val() == "+1" && phone.length == 11 || (result && ($(this).find('#code').val() == "+92" && phone.length == 10))))) {
          $('#phoneErr').text('');
          return true;
        } else {
          $('#phoneErr').text(`please enter vaild phone number, ${$(this).find('#code').val() == '+1' ? 11 : 10} digits`);
          return false;
        }
      };

      const handlePasswordChange = (password) => {
        
        let regex = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;
        if (!regex.test(password)) {
              $('#passwordErr').text('Password must contain at least 8 characters, one uppercase, one lowercase, one number and one special character');
              return false;
        }
        $('#passwordErr').text('');
        return true
      }

      const handleOtpChange =(otp)=> {
        let regex = /^[0-9]{4,4}$/
        if (regex.test(otp)) {
          $('#step-2').prop('disabled', false);
          $('#otpErr').text('');
          return true;
        } else {
          $('#otpErr').text('please enter 4 digit otp');
          $('#step-2').prop('disabled', true);
          return false;
        }
      }

      const handleNameChange = ({name, value, arg, selector}) => {
        let regex = /^[a-zA-Z ]{1,30}$/;
        let select = `#${name}Err`; 
        if(selector){
          select = `${selector} #${name}Err`;
        }
        if (regex.test(value)) {
          $(select).text('');
          return true;
        } else {
          $(select).text(`please enter vaild ${arg ? arg : name}`);
          return false;
        }
        return false
      }

      $('input#email').on('input', function () {
        handleEmailChange($(this).val());
      });

      $("input[name=phone]").on('input', function () {
        handlePhoneChange($(this).val());
      });
      
      $('input[name=password]').on('input', function () {
        handlePasswordChange($(this).val())
      });

      $('#signupProvider').on('submit', function (event) {
        event.preventDefault();
        $('.serverEr').addClass('d-none');
        $('.serverEr').text('');
        var request;
        // Abort any pending request
        if (request) {
          request.abort();
        }

        let error = false;
        
        let email = $(this).find('input#email').val();
        let code = $(this).find('#code').val();
        let phone =   `${$("input[name=phone]").val()}`;
        let password =  $(this).find('input#password').val();
        
        if (handleEmailChange(email) == false) {
          error = true;
        }
        if (handlePhoneChange(phone) == false) {
          error = true;
        }
        if (handlePasswordChange(password) == false) {
          error = true;
        }

        if (error) {
          return false;
        }

        const data = {
          email,
          phone: `${code}${phone}`,
          password
        }

        request = $.ajax({
          url: `${API}provider/signup`,
          type: "post",
          data: data,
          dataType: "json"
        }).done(function (response) {
          $(this).find('button').prop("disabled", false);
          $(".step-1").addClass("d-none");
          $(".step-2").removeClass("d-none");
          phone = `${code}${phone}`;
          $("#otpPhone").text(phone);
        }).fail(function (jqXHR) {
          if (jqXHR.status === 422) {
            let errors = jqXHR.responseJSON.message;
            if (errors.email) {
              $('#emailErr').text(errors.email);
            }
            if (errors.phone) {
              $('#phoneErr').text(errors.phone);
            }
            if (errors.password) {
              $('#passwordErr').text(errors.password);
            }
          }
          if (jqXHR.status === 500) {
            $('.serverEr').removeClass('d-none');
            $('.serverEr').text(jqXHR.responseJSON.message);
          }
        }).always(function (e) {
          $(this).find('button').prop("disabled", false);
        })
      });

      $('#otp').on('input', function () {
        handleOtpChange($(this).val())
      });

      $('#resend').on('click', function (){
        let phone= $("#otpPhone").text();
        $.ajax({
          url: `${API}provider/signup/phone/verify/resend`,
          type: "post",
          data: {phone},
          dataType: "json"
        }).done(function (response) {
            $('#resendSuccess').removeClass('d-none');
            $('#resendSuccess').text('otp sent successfully');
        }).fail(function (jqXHR) {
          if (jqXHR.status === 500) {
            $('.serverEr').removeClass('d-none');
            $('.serverEr').text(jqXHR.responseJSON.message);
          }
        })
      });

      $('#step-2').on('click', function () {
        if (handleOtpChange($('#otp').val()) == false) {
          return false
        }
        let data = {
          otp: $('#otp').val(),
          phone: $("#otpPhone").text()
        }
        $.ajax({
          url: `${API}provider/signup/phone/verify`,
          type: "post",
          data: data,
          dataType: "json"
        }).done(function (response) {
          // $(this).find('button').prop("disabled", false);
          localStorage.setItem('provider_token', response.data.auth_token);
          $(".step-2").addClass("d-none");
          $(".step-3").removeClass("d-none");
          phone = `${code}${phone}`;
          $("#otpPhone").text(phone);
        }).fail(function (jqXHR) {
          if (jqXHR.status === 401) {
            let message = jqXHR.responseJSON.message;
            if (errors.otp) {
              $('#otpErr').text(message);
            }
          }
          if (jqXHR.status === 422) {
            let errors = jqXHR.responseJSON.message;
            if (errors.otp) {
              $('#otpErr').text(errors.otp[0]);
            }
          }
          if (jqXHR.status === 500) {
            $('.serverEr').removeClass('d-none');
            $('.serverEr').text(jqXHR.responseJSON.message);
          }
        }).always(function (e) {
          $(this).find('button').prop("disabled", false);
        });
      });

      $('#provider_first_name').on('input', function (e) {
        const {name, value} = e.target;
        handleNameChange({name, value});
      });

      $('#provider_last_name').on('input', function (e) {
        const {name, value} = e.target;
        handleNameChange({name, value});
      });

      $('#step-3').click(function () {

        let error = false;
        first_name = $('#provider_first_name').val();
        last_name = $('#provider_last_name').val();

        if (handleNameChange({ name: "provider_first_name", value:first_name }) == false) {
          error = true;
        }
        if (handleNameChange({ name: "provider_last_name", value:last_name }) == false) {
          error = true;
        }

        let spend_each_month  = null;

        $('.online-marketing').each(function () {
          if ($(this).is(':checked')) {
            spend_each_month = $(this).val();
          }
        });

        if(spend_each_month == null){
          $('#spendErr').text('Please select at least one option');
          error = true;
        }
        

        if(error || localStorage.getItem('provider_token') == null || localStorage.getItem('provider_token') == undefined){
          return false;
        }

        let data = {
          first_name,
          last_name,
          spend_each_month
        }
        $.ajax({
          url: `${API}provider/signup/name`,
          headers: {
            Authorization: localStorage.getItem('provider_token')
          },
          type: "post",
          data: data,
          dataType: "json"
        }).done(function (response) {
          $(".step-3").addClass("d-none");
          $(".step-4").removeClass("d-none");
          localStorage.setItem('step', 4);
          getServices();
        }).fail(function (jqXHR) {
          if (jqXHR.status === 401) {
            let message = jqXHR.responseJSON.message;
            if (message) {
              $('.serverEr3').removeClass('d-none');
              $('.serverEr3').text(jqXHR.responseJSON.message);
            }
          }
          if (jqXHR.status === 422) {
            let errors = jqXHR.responseJSON.message;
            if (errors.email) {
              $('#provider_first_nameErr').text(errors.first_name);
            }
            if (errors.phone) {
              $('#provider_last_nameErr').text(errors.last_name);
            }
          }
          if (jqXHR.status === 500) {
            $('.serverEr3').removeClass('d-none');
            $('.serverEr3').text(jqXHR.responseJSON.message);
          }
        });
      })

      $('#service_id').change(function (evt) {
        $('#serviceErr').text('');
        let services = localStorage.getItem('services');
        let serviceHtml = '';
        if(services){
          services = JSON.parse(services);
          let service = services.find(service => service.id == evt.target.value);
          if(service && service.sub_services){
            serviceHtml = service.sub_services.map((service) => 
             `<label class="custom-check mr-2">${service.name}
                <input class="checkbox" type="checkbox" value=${service.id}></input>
                <span class="checkmark"></span>
              </label>`
            );
            $('#subService').html(serviceHtml);
          }
        }
      })

      // on click on add zip code button
      $('#step-4').click(function () {
        let isError = false;
        if($('#service_id').val() == null){
          $('#serviceErr').text('Please select at least one service');
          isError = true;
        }
        let isChecked = false;
        $('.checkbox').each(function () {
          if ($(this).is(':checked')) {
            isChecked = true;
          }
        });
        if(isChecked == false){
          $('#subServiceErr').text('Please select at least one service');
          isError = true;
        }
        if ($('.zip-code').children().length == 0) {
          $('#zipCodeErr').text('Please add at least one zip code');
          isError = true;
        }
        if(isError){
          return false;
        }
        if(localStorage.getItem('provider_token')){
          let data = {
            service_id: Number($('#service_id').val()),
            sub_services: $('#subService input:checkbox:checked').map(function () {
              return Number($(this).val());
            }).get(),
            zip_code: $('.zip-code').children().map(function () {
              return Number($(this).data('value'));
            }).get()
          }
          $.ajax({
            url: `${API}provider/signup/my-services`,
            headers: {
              Authorization: localStorage.getItem('provider_token'),
            },
            type: "post",
            data,
            dataType: "json",
          }).done(function (response) {
            $(".step-4").addClass("d-none");
            $(".step-5").removeClass("d-none");
            localStorage.setItem('step', 5);
          }).fail(function (jqXHR) {
            if (jqXHR.status === 422) {
              let errors = jqXHR.responseJSON.message;
              if (errors?.service_id) {
                $('#serviceErr').text(errors.service_id);
              }
              if (errors?.sub_services) {
                $('#subServiceErr').text(errors.sub_services);
              }
              if (errors?.zip_code) {
                $('#zipCodeErr').text(errors.zip_code);
              }
            }
            if (jqXHR.status === 500) {
              $('.serverEr4').removeClass('d-none');
              $('.serverEr4').text(jqXHR.responseJSON.message);
            }
          });
        }
      });

      $('#file-upload').on('change', function (e) {
        var file = e.target.files[0];
        e.target.src = URL.createObjectURL(file);
      });
      
      $('#file-upload1').on('change', function (e) {
        var file = e.target.files[0];
        e.target.src = URL.createObjectURL(file);
      });

      const handleHourlyRateChange = ({ name, value, selector }) => {
        let regex = /^[0-9]{1,3}$/;
        select = null
        if(name){
          select = `#${name}Err`;
        } else if(selector){
          select = selector;
        } else {
          return false
        }
        if (regex.test(value)) {
          $(select).text('');
          return true;
        } else {
          $(select).text('please enter vaild hourly rate');
          return false;
        }
        return false
      }

      $('#profile #first_name').on('input', function (e) {
        const { name, value } = e.target;
        console.log(value);
        handleNameChange({ name, value, arg: 'first_name' });
      });

      $('#profile #last_name').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({ name, value, arg: 'last_name' })
      });

      $('#profile #hourly_rate').on('input', function (e) {
        const { name, value } = e.target;
        handleHourlyRateChange({ name, value })
      });

      $('#profile #city').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({ name, value, arg: 'city' })
      });

      $('#profile #state').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({ name, value, arg: 'state' })
      });

      $('#profile textarea#bio').on('input', function (e) {
        if ($(this).val().length < 20 || $(this).val().length > 100) {
          $('#profile #bioErr').text('bio should be less than 100 and more than 20 characters');
        }
        $('#profile #bioErr').text('');
      });

      $('#profile').on('submit', function (evt) {
        evt.preventDefault();
        let isError = false;
        let first_name = $('#profile #first_name');
        let last_name = $('#profile #last_name');
        let dob = $('#profile #datepicker');
        let street_address = $('#profile #street_address');
        let suite_number = $('#profile #suite_number');
        let zip_code = $('#profile #zip_code');
        let hourly_rate = $('#profile #hourly_rate');
        let city = $('#profile #city');
        let state = $('#profile #state');
        let bio = $('#profile textarea#bio');

        if (handleNameChange({ name: 'first_name', value: first_name.val(), arg: "Last Name" }) == false) {
          isError = true;
        }
        if (handleNameChange({ name: 'last_name', value: last_name.val(), arg: "First Name" }) == false) {
          isError = true;
        }
        if (handleHourlyRateChange({ name: 'hourly_rate', value: hourly_rate.val() }) == false) {
          isError = true;
        }
        if (handleNameChange({ name: 'city', value: city.val(), arg: "city" }) == false) {
          isError = true;
        }
        if (handleNameChange({ name: 'state', value: city.val(), arg: "state" }) == false) {
          isError = true;
        }
        if ((bio.val().length < 20 || bio.val().length > 100) && bio.val().length != 0) {
          $('#profile #bioErr').text('bio should be less than 100 and more than 20 characters');
          isError = true;
        }
        if (isError) {
          return false;
        }
        if (localStorage.getItem('provider_token') == undefined || localStorage.getItem('provider_token') == null) {
          return false
        }

        var data = new FormData();
        data.append('type', 'Individual');
        data.append('first_name', first_name.val());
        data.append('last_name', last_name.val());
        data.append('dob', dob.val());
        data.append('street_address', street_address.val());
        data.append('suite_number', suite_number.val());
        data.append('zip_code', zip_code.val());
        data.append('hourly_rate', hourly_rate.val());
        data.append('city', city.val());
        data.append('state', state.val());
        if(bio.val().length != 0){
          data.append('bio', bio.val());
        }
        if($('#file-upload1').prop('files')[0] !== undefined){
          data.append('image', $('#file-upload1').prop('files')[0]);
        }

        $.ajax({
          url: `${API}provider/signup/profile`,
          headers: {
            Authorization: localStorage.getItem('provider_token'),
          },
          type: "post",
          processData: false,
          contentType: false,
          cache: false,
          data,
          enctype: 'multipart/form-data',
        }).done(function (response) {
          $('#profile .serverEr6').addClass('d-none');
          $('.step-6-user').addClass('d-none');
          $('.step-1').removeClass('d-none');
          $('#signupProvider').trigger("reset");
          // localStorage.clear();
        }).fail(function (jqXHR) {
          if (jqXHR.status === 422) {
            let errors = jqXHR.responseJSON.message;
            if (errors?.first_name) {
              $('#profile #first_nameErr').text(errors.first_name);
            }
            if (errors?.last_name) {
              $('#profile #last_nameErr').text(errors.last_name);
            }
            if (errors?.zip_code) {
              $('#profile #zip_codeErr').text(errors.zip_code);
            }
            if(errors?.dob){
              $('#profile #dobErr').text(errors.dob);
            }
            if(errors?.street_address){
              $('#profile #street_addressErr').text(errors.street_address);
            }
            if(errors?.suite_number){
              $('#profile #suite_numberErr').text(errors.suite_number);
            }
            if(errors?.hourly_rate){
              $('#profile #hourly_rateErr').text(errors.hourly_rate);
            }
            if(errors?.city){
              $('#profile #cityErr').text(errors.city);
            }
            if(errors?.state){
              $('#profile #stateErr').text(errors.state);
            }
            if(errors?.bio){
              $('#profile #bioErr').text(errors.bio);
            }
          }
          if (jqXHR.status === 500) {
            $('.serverEr6').removeClass('d-none');
            $('.serverEr6').text(jqXHR.responseJSON.message);
          }
        });
      })

      const handleNumber_of_employeesChange = ({name, value}) => {
        let regex = /^[0-9]{1,5}$/;
        if (regex.test(value)) {
          name && $(`#${name}Err`).text('');
          return true;
        } else {
          name && $(`#${name}Err`).text('please enter vaild number');
          return false;
        }
        return false
      }

      $('#companyProfile #business_name').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({ name, value, arg: 'business_name' });
      });

      $('#companyProfile #number_of_employees').on('input', function (e) {
        const { name, value } = e.target;
        handleNumber_of_employeesChange({ name, value });
      });

      $('#companyProfile #hourly_rate').on('input', function (e) {
        const { name, value } = e.target;
        handleHourlyRateChange({value, selector: '#companyProfile #hourly_rateErr'});
      });

      $('#companyProfile #city').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({name, value, selector: '#companyProfile' });
      });

      $('#companyProfile #state').on('input', function (e) {
        const { name, value } = e.target;
        handleNameChange({name, value, selector: '#companyProfile' });
      });

      $('#companyProfile textarea#bio').on('input', function (e) {
        if ($(this).val().length < 20 || $(this).val().length > 100) {
          $('#companyProfile #bioErr').text('bio should be less than 100 and more than 20 characters');
        }
        $('#companyProfile #bioErr').text('');
      });

      $('#companyProfile').on('submit', function (evt) {
        evt.preventDefault();
        let isError = false;
        let business_name = $('#business_name');
        let number_of_employees = $('#number_of_employees');
        let founded = $('#founded');
        let street_address = $('#companyProfile #street_address');
        let suite_number = $('#companyProfile #suite_number');
        let zip_code = $('#companyProfile #zip_code');
        let hourly_rate = $('#companyProfile #hourly_rate');
        let city = $('#companyProfile #city');
        let state = $('#companyProfile #state');
        let bio = $('#companyProfile textarea#bio');

        if (handleNameChange({ name: 'business_name', value: business_name.val(), arg: 'business_name' }) == false) {
          isError = true;
        }
        if (handleHourlyRateChange({value: hourly_rate.val(), selector: '#companyProfile #hourly_rateErr' }) == false) {
          isError = true;
        }
        if (handleNameChange({ name: 'city', value: city.val(), arg: "city" }) == false) {
          isError = true;
        }
        if (handleNameChange({ name: 'state', value: city.val(), arg: "state" }) == false) {
          isError = true;
        }
        if(handleNumber_of_employeesChange({ name: 'number_of_employees', value: number_of_employees.val() }) == false){
          isError = true;
        }
        if ((bio.val().length < 20 || bio.val().length > 100) && bio.val().length != 0) {
          $('#companyProfile #bioErr').text('bio should be less than 100 and more than 20 characters');
          isError = true;
        }
        if (isError) {
          return false;
        }
        if (localStorage.getItem('provider_token') == undefined || localStorage.getItem('provider_token') == null) {
          return false
        }

        var data = new FormData();
        data.append('type', 'Business');
        data.append('number_of_employees', number_of_employees.val());
        data.append('business_name', business_name.val());
        data.append('founded', founded.val());
        data.append('street_address', street_address.val());
        data.append('suite_number', suite_number.val());
        data.append('zip_code', zip_code.val());
        data.append('hourly_rate', hourly_rate.val());
        data.append('city', city.val());
        data.append('state', state.val());
        if (bio.val().length != 0) {
          data.append('bio', bio.val());
        }
        if ($('#file-upload').prop('files')[0] !== undefined) {
          data.append('image', $('#file-upload').prop('files')[0]);
        }

        $.ajax({
          url: `${API}provider/signup/profile`,
          headers: {
            Authorization: localStorage.getItem('provider_token'),
          },
          type: "post",
          processData: false,
          contentType: false,
          cache: false,
          data,
          enctype: 'multipart/form-data',
        }).done(function (response) {
          $('#companyProfile .serverEr6').addClass('d-none');
          $('.step-6-company').addClass('d-none');
          $('.step-1').removeClass('d-none');
          $('#success').removeClass('d-none');
          $('#success').text('Registered Successfully');
          $('#signupProvider').trigger("reset");
          localStorage.clear();
        }).fail(function (jqXHR) {
          if (jqXHR.status === 422) {
            let errors = jqXHR.responseJSON.message;
            if (errors?.first_name) {
              $('#companyProfile #first_nameErr').text(errors.first_name);
            }
            if (errors?.last_name) {
              $('#companyProfile #last_nameErr').text(errors.last_name);
            }
            if (errors?.zip_code) {
              $('#companyProfile #zip_codeErr').text(errors.zip_code);
            }
            if (errors?.dob) {
              $('#companyProfile #dobErr').text(errors.dob);
            }
            if (errors?.street_address) {
              $('#companyProfile #street_addressErr').text(errors.street_address);
            }
            if (errors?.suite_number) {
              $('#companyProfile #suite_numberErr').text(errors.suite_number);
            }
            if (errors?.hourly_rate) {
              $('#companyProfile #hourly_rateErr').text(errors.hourly_rate);
            }
            if (errors?.city) {
              $('#companyProfile #cityErr').text(errors.city);
            }
            if (errors?.state) {
              $('#companyProfile #stateErr').text(errors.state);
            }
            if (errors?.bio) {
              $('#companyProfile #bioErr').text(errors.bio);
            }
          }
          if (jqXHR.status === 500) {
            $('.serverEr6').removeClass('d-none');
            $('.serverEr6').text(jqXHR.responseJSON.message);
          }
        });
      });

      //  remove class
      $("#step-2-back").click(function () {
        $(".step-1").removeClass("d-none");
        $(".step-2").addClass("d-none");
      });
      
      // remove class
      $("#step-4-back").click(function () {
        $(".step-3").removeClass("d-none");
        $(".step-4").addClass("d-none");
        localStorage.setItem('step', 3);
      });

      // remove class
      $("#step-5-back").click(function () {
        $(".step-4").removeClass("d-none");
        $(".step-5").addClass("d-none");
        localStorage.setItem('step', 4);
        getServices();
      });

      // add class
      $("#step-individual").click(function () {
        $(".step-5").addClass("d-none");
        $(".step-6-user").removeClass("d-none");
      });
      // // add class
      $("#step-compnay").click(function () {
        $(".step-5").addClass("d-none");
        $(".step-6-company").removeClass("d-none");
      });

      // remove class
      $("#step-6-back").click(function () {
        $(".step-5").removeClass("d-none");
        $(".step-6-user").addClass("d-none");
      });

      $("#step-6-back-c").click(function () {
        $(".step-5").removeClass("d-none");
        $(".step-6-company").addClass("d-none");
      });
      
      $('#profile').on('submit', function (e) {
        e.preventDefault();
        let formData = new FormData(this);
        console.log(formData);
      });
      
    });

    $(document).ready(function () {
      $("#individual").click(function () {
        $("#step-individual")
          .addClass("user-active")
          .siblings()
          .removeClass("company-active");
          $('#space').removeClass('d-none');
      });
      $("#company").click(function () {
        $("#step-compnay")
          .addClass("company-active")
          .siblings()
          .removeClass("user-active");
          $('#space').removeClass('d-none');
      });
    });
  </script>
</body>

</html>